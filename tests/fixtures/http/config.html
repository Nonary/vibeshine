<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

<head>
  <!-- TEMPLATE_HEADER - Used by Every UI Page -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sunshine</title>
<link rel="icon" type="image/x-icon" href="./images/sunshine.ico">


<link href="./assets/css/sunshine.css" rel="stylesheet" />

    <style>
      .config-page {
        padding: 1em;
        border: 1px solid #dee2e6;
        border-top: none;
      }

      .buttons {
        padding: 1em 0;
      }

      /* Sticky config header with save-status dot */
      .config-sticky-header {
        position: sticky;
        top: 0;
        z-index: 1020;
        /* above content, below navbar if fixed */
        background: var(--bs-body-bg);
        padding-top: .5rem;
        padding-bottom: .5rem;
      }

      .config-sticky-header .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .config-sticky-header h1 {
        margin-bottom: 0;
      }

      .status-area {
        display: flex;
        align-items: center;
        gap: .5rem;
      }

      .status-area.clickable {
        cursor: pointer;
      }

      .status-area.clickable .status-text {
        text-decoration: underline;
        text-underline-offset: 2px;
      }
  .status-actions { display:flex; align-items:center; gap:.5rem; }

      .save-status {
        display: inline-block;
        width: .75rem;
        height: .75rem;
        border-radius: 50%;
        vertical-align: middle;
      }

      .save-status.status-saving {
        background-color: #0d6efd;
        /* bootstrap primary */
        box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15);
        animation: pulse 1.2s ease-in-out infinite;
      }

      .save-status.status-applied {
        background-color: #198754;
        /* bootstrap success */
      }

      .save-status.status-deferred {
        background-color: #fd7e14;
        /* bootstrap orange */
      }

      .save-status.status-waiting {
        background-color: #6c757d;
        /* bootstrap secondary gray */
        opacity: .85;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }

        50% {
          transform: scale(1.2);
          opacity: .75;
        }

        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* Temporary highlight for restart button when navigated */
      .pulse-highlight {
        animation: btnPulse 1.2s ease-in-out 3;
      }

      @keyframes btnPulse {
        0% {
          box-shadow: 0 0 0 0 rgba(253, 126, 20, .7);
        }

        70% {
          box-shadow: 0 0 0 .6rem rgba(253, 126, 20, 0);
        }

        100% {
          box-shadow: 0 0 0 0 rgba(253, 126, 20, 0);
        }
      }

      /* Search functionality styles */
      .config-search {
        position: relative;
        flex: 1 1 340px;
        max-width: 480px;
        margin: 0 1rem;
      }

      .config-search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        z-index: 1050;
        background: var(--bs-body-bg);
        border: 1px solid var(--bs-border-color);
        border-top: none;
        border-radius: 0 0 .375rem .375rem;
        max-height: 320px;
        overflow-y: auto;
        box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);
      }

      .search-result-item {
        padding: .75rem 1rem;
        cursor: pointer;
        border-bottom: 1px solid var(--bs-border-color);
      }

      .search-result-item:last-child {
        border-bottom: none;
      }

      .search-result-item:hover,
      .search-result-item.active {
        background-color: var(--bs-primary-bg-subtle);
        color: var(--bs-emphasis-color);
      }

      .search-result-item.no-results {
        cursor: default;
        color: var(--bs-secondary-color);
        font-style: italic;
      }

      .search-breadcrumb {
        font-weight: 500;
        color: var(--bs-emphasis-color);
      }

      .search-description {
        font-size: .875rem;
        color: var(--bs-secondary-color);
        margin-top: .25rem;
        line-height: 1.3;
      }

      /* Search hit highlight animation */
      .search-hit-pulse {
        animation: searchPulse 2.5s ease-in-out;
      }

      @keyframes searchPulse {
        0% {
          box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .4);
        }
        70% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
        }
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .header-row {
          flex-wrap: wrap;
          gap: .5rem;
        }
        
        .config-search {
          order: 3;
          flex: 1 1 100%;
          margin: .5rem 0 0 0;
          max-width: none;
        }
      }
    </style>
  <script type="module" crossorigin src="./assets/config-673fbbe3.js"></script>
  <link rel="modulepreload" crossorigin href="./assets/_plugin-vue_export-helper-050a01a0.js">
  <link rel="modulepreload" crossorigin href="./assets/Navbar-4a0ff179.js">
  <link rel="modulepreload" crossorigin href="./assets/Checkbox-a17287d1.js">
  <link rel="stylesheet" href="./assets/_plugin-vue_export-helper-3a9792a4.css">
  <link rel="stylesheet" href="./assets/Navbar-13079613.css">
  <link rel="stylesheet" href="./assets/config-83570d8e.css">
</head>

<body id="app" v-cloak>
  <Navbar></Navbar>
  <div class="container">
    <div class="config-sticky-header">
      <div class="header-row">
        <h1>{{ $t('config.configuration') }}</h1>
        <div class="config-search" v-if="initialized">
          <input 
            type="text" 
            class="form-control" 
            v-model="searchQuery"
            @input="onSearchInput"
            @keydown="onSearchKeydown"
            @focus="searchActive = true"
            @blur="onSearchBlur"
            placeholder="Search settings..."
            aria-label="Search settings"
            role="combobox"
            :aria-expanded="searchActive && searchResults.length > 0"
            :aria-owns="searchActive && searchResults.length > 0 ? 'search-listbox' : null"
            :aria-activedescendant="searchActiveIndex >= 0 ? `search-option-${searchActiveIndex}` : null"
            aria-autocomplete="list"
            ref="searchInput"
          />
          <div 
            v-if="searchActive && searchResults.length > 0" 
            class="config-search-results"
            id="search-listbox"
            role="listbox"
          >
            <div 
              v-for="(result, index) in searchResults" 
              :key="`${result.tabId}-${result.key}`"
              :id="`search-option-${index}`"
              class="search-result-item"
              :class="{ active: index === searchActiveIndex }"
              role="option"
              :aria-selected="index === searchActiveIndex"
              @mousedown.prevent="selectSearchResult(result)"
              @mouseenter="searchActiveIndex = index"
            >
              <div class="search-breadcrumb">{{ result.tabName }} â€º {{ result.labelText }}</div>
              <div v-if="result.descText" class="search-description">{{ result.descText }}</div>
            </div>
          </div>
          <div 
            v-if="searchActive && searchQuery && searchResults.length === 0" 
            class="config-search-results"
          >
            <div class="search-result-item no-results">No matches found</div>
          </div>
        </div>
        <div class="status-actions">
          <div class="status-area" :class="{ clickable: restartRequired }" role="button" :aria-disabled="!restartRequired"
            tabindex="0" @click="onStatusClick" @keydown.enter.prevent="onStatusClick"
            @keydown.space.prevent="onStatusClick">
            <span class="save-status" :class="statusClass"></span>
            <span class="status-text">{{ statusText }}</span>
          </div>
          <button v-if="pendingRestartSave" class="btn btn-sm btn-primary" @click="manualSave">{{ $t('_common.save') }}</button>
        </div>
      </div>
    </div>
    <div class="my-3"></div>
    <div class="form" v-if="config">
      <!-- Header -->
      <ul class="nav nav-tabs">
        <li class="nav-item" v-for="tab in tabs" :key="tab.id">
          <a class="nav-link" :class="{'active': tab.id === currentTab}" href="#"
            @click="currentTab = tab.id">{{tab.name}}</a>
        </li>
      </ul>

      <!-- General Tab -->
      <general v-if="currentTab === 'general'" :config="config" :platform="platform">
      </general>

      <!-- Input Tab -->
      <inputs v-if="currentTab === 'input'" :config="config" :platform="platform">
      </inputs>

      <!-- Audio/Video Tab -->
      <audio-video v-if="currentTab === 'av'" :config="config" :platform="platform">
      </audio-video>

      <!-- Network Tab -->
      <network v-if="currentTab === 'network'" :config="config" :platform="platform">
      </network>

      <!-- Files Tab -->
      <files v-if="currentTab === 'files'" :config="config" :platform="platform">
      </files>

      <!-- Advanced Tab -->
      <advanced v-if="currentTab === 'advanced'" :config="config" :platform="platform">
      </advanced>

      <container-encoders :current-tab="currentTab" :config="config" :platform="platform">
      </container-encoders>
    </div>

    <!-- Bottom banners removed per new UX -->
    <div class="mb-3 buttons">
      <button id="restart-apply-button" class="btn btn-success" @click="apply" v-if="restartRequired && !restarted">{{
        $t('_common.apply') }}</button>
    </div>
  </div>
</body>


